<Window x:Class="ToTheLicense.Register"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="הרשמה לרישיון" Height="650" Width="450"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True" Background="Transparent"
        FontFamily="Segoe UI" FlowDirection="RightToLeft">

    <Window.Resources>
        <SolidColorBrush x:Key="BlueBrush" Color="#002366"/>
        <SolidColorBrush x:Key="YellowBrush" Color="#FFDDA800"/>

        <Style TargetType="TextBox">
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>

        <Style TargetType="PasswordBox">
            <Setter Property="Height" Value="30"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="5,0"/>
            <Setter Property="Margin" Value="0,0,0,10"/>
        </Style>
    </Window.Resources>

    <Border Background="White" CornerRadius="15" Margin="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="15" ShadowDepth="0" Opacity="0.3"/>
        </Border.Effect>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- כותרת וכפתור סגירה -->
            <Grid>
                <Button Content="X" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="15" 
                        Background="Transparent" BorderThickness="0" FontWeight="Bold" FontSize="16" Click="Close_Click"/>
                <StackPanel HorizontalAlignment="Center" Margin="20">
                    <TextBlock Text="הרשמה חדשה" FontSize="24" FontWeight="Bold" Foreground="{StaticResource BlueBrush}" HorizontalAlignment="Center"/>
                    <TextBlock Text="הצטרף לקהילת הנהיגה שלנו" FontSize="14" Foreground="Gray" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>

            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Margin="0,0,0,20">
                <StackPanel Margin="40,0">

                    <!-- פרטים אישיים -->
                    <TextBlock Text="שם פרטי" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtFirstName"/>

                    <TextBlock Text="שם משפחה" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtLastName"/>

                    <TextBlock Text="שם משתמש" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtUser"/>

                    <TextBlock Text="סיסמה" FontWeight="SemiBold"/>
                    <PasswordBox x:Name="txtPass"/>

                    <TextBlock Text="אימייל" FontWeight="SemiBold"/>
                    <TextBox x:Name="txtEmail"/>

                    <!-- בחירת סוג משתמש -->
                    <TextBlock Text="אני רוצה להירשם בתור:" FontWeight="SemiBold" Margin="0,10,0,5"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,15">
                        <RadioButton x:Name="rbStudent" Content="תלמיד 🎓" IsChecked="True" Margin="0,0,20,0" Checked="UserType_Changed"/>
                        <RadioButton x:Name="rbTeacher" Content="מורה נהיגה 🚗" Checked="UserType_Changed"/>
                    </StackPanel>

                    <!-- שדות ספציפיים לתלמיד -->
                    <StackPanel x:Name="StudentFields" Visibility="Visible">
                        <TextBlock Text="סוג רישיון מבוקש (לדוגמה: אוטומט B)" FontWeight="SemiBold"/>
                        <ComboBox x:Name="cmbLicenseType" Height="30" Margin="0,0,0,10">
                            <ComboBoxItem Content="רכב פרטי (B) - אוטומט" IsSelected="True"/>
                            <ComboBoxItem Content="רכב פרטי (B) - ידני"/>
                            <ComboBoxItem Content="אופנוע (A)"/>
                        </ComboBox>
                    </StackPanel>

                    <!-- שדות ספציפיים למורה -->
                    <StackPanel x:Name="TeacherFields" Visibility="Collapsed">
                        <TextBlock Text="אזור לימוד (עיר)" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtLocation"/>

                        <TextBlock Text="סוג רכב (דגם)" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtVehicle"/>

                        <TextBlock Text="מחיר לשיעור (₪)" FontWeight="SemiBold"/>
                        <TextBox x:Name="txtPrice" PreviewTextInput="NumberValidationTextBox"/>
                    </StackPanel>

                    <!-- כפתור הרשמה -->
                    <Button Content="הרשם עכשיו" Background="{StaticResource YellowBrush}" Foreground="#222" 
                            FontWeight="Bold" Height="40" Margin="0,20,0,10" Click="Register_Click"
                            BorderThickness="0" Cursor="Hand">
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="8"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                    <Button Content="כבר יש לי חשבון? התחבר" Background="Transparent" BorderThickness="0" 
                            Foreground="{StaticResource BlueBrush}" Cursor="Hand" Click="BackToLogin_Click"/>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>